<?php
session_start();
require '../forms/db.class.php';
require '../forms/panier.class.php';
$db = new DB();
$panier = new panier($db);
?>
<!DOCTYPE html>
<!--[if IE 8 ]>
<html class="no-js ie8" lang="en"> <![endif]-->
<!--[if IE 9 ]>
<html class="no-js ie9" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->

<!-- Mirrored from farmfresh.html.themeplayers.net/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 Jul 2017 08:09:01 GMT -->
<head lang="en">
    <meta charset="UTF-8">
    <meta name="description" content="Farm Fresh is HTML5 template, dedicated for farm owners, organic food distributors and green, eco, veggie food lovers.">
    <meta name="keywords" content="farm, organic template, html5 eco template" />
    <meta name="author" content="CreateIT">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1, shrink-to-fit=no">


    <title>Farm Fresh - Organic HTML5 Template</title>
    <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <!--  <link rel="stylesheet" type="text/css" href="assets/css/motive.css">

    <!--[if lt IE 9]>
    <script src="assets/bootstrap/js/html5shiv.min.js"></script>
    <script src="assets/bootstrap/js/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">


        @import url(//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css);

body {margin-top: -80px;padding-top: 20px}

fieldset, label { margin: 0; padding: 0; }
/****** Style Star Rating Widget *****/

.rating { 
  border: none;
  float: left;
}

.rating > input { display: none; } 
.rating > label:before { 
  margin: 5px;
  font-size: 1.25em;
  font-family: FontAwesome;
  display: inline-block;
  content: "\f005";
}

.rating > .half:before { 
  content: "\f089";
  position: absolute;
}

.rating > label { 
  color: #ddd; 
 float: right; 
}

/***** CSS Magic to Highlight Stars on Hover *****/

.rating > input:checked ~ label, /* show gold star when clicked */
.rating:not(:checked) > label:hover, /* hover current star */
.rating:not(:checked) > label:hover ~ label { color: #FFD700;  } /* hover previous stars in list */

.rating > input:checked + label:hover, /* hover current star when changing rating */
.rating > input:checked ~ label:hover,
.rating > label:hover ~ input:checked ~ label, /* lighten current selection */
.rating > input:checked ~ label:hover ~ label { color: #FFED85;  } 

    </style>

<?php

    if(isset($_GET['nomprod']))
    {
        $nom = $_GET['nomprod'];
        $sql = "SELECT * FROM produits WHERE nom_prod = '$nom'";
        $prodDetails = $db->query($sql);
            if(($prodDetails[0]->total) > 0)
            {
                if(($prodDetails[0]->rate)/($prodDetails[0]->total) > 0)
                    echo '<style> .rating > .star'.round($prodDetails[0]->rate/$prodDetails[0]->total).' ~ label { color: #FFED85;  } </style>' ;
            }
        }
        
    

?>

    <script src="assets/js/modernizr.custom.js"></script>



</head>
<body class="cssAnimate navbar--transparent navbar--fixedTop navbar-onepage">


<div class="ct-preloader"><div class="ct-preloader-content"></div></div>


<div class="ct-navbarMobile ct-u-bgBlack">
    <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>

<div class="ct-menuMobile">
    <ul class="ct-menuMobile-navbar list-unstyled ct-u-backgroundDarkGray">
        <li><a href="index.php">Home</a></li>
        <li><a href="about-us.php">About</a></li>
        <li><a href="our-products.php">Fresh Products</a></li>
        <li><a href="BoxProducts.php">Products</a></li>
        <li><a href="donations.php">Donate</a></li>
        <li><a href="contact-us.php">Contact</a></li>
        <li><a href="forms/login.php">Sign In</a></li>
        <li><a href="#exampleModal" data-toggle="modal" data-target = "#exampleModal" data-backdrop="false"> Sign Up</a></li>
    </ul>
</div>

<div id="ct-js-wrapper">
<header class="ct-mainHeader">


    <nav class="navbar navbar-default navbar--type2 yamm" style="padding-top: 60px;margin-bottom: 20px">

        <div class="container ct-navbar-container">

            <form class="navbar-form navbar-right" role="search" action="search.php" method="post">
                <div class="input-group" style="margin-top: -10px">
                    <input type="text" class="form-control" placeholder="Search for..." name="recherche">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button"><i class="fa fa-search"></i></button>
                        </span>
                </div><!-- /input-group -->
            </form>

            <div class="navbar-header">
                <a class="navbar-brand" href="index.php">
                    <img class="navbar-brand-defaultColor" alt="Brand" src="assets/images/demo-content/logo.png" />
                </a>
            </div>

<style type="text/css">
  
  .dropbtn {
    background-color: transparent;
    color: white;
    padding: 2px;
    font-size: 16px;
    border: none;
    cursor: pointer;
}

/* The container <div> - needed to position the dropdown content */
.dropdown {
    position: relative;
    display: inline-block;
}

/* Dropdown Content (Hidden by Default) */
.dropdown-content {
    display: none;
    position: absolute;
    background-color: #99cd4d;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
}

/* Links inside the dropdown */
.dropdown-content a {
    color: black;
    padding: 2px 4px;
    text-decoration: none;
    display: block;
}

/* Change color of dropdown links on hover */
.dropdown-content a:hover {background-color: #99cd4d}

/* Show the dropdown menu on hover */
.dropdown:hover .dropdown-content {
    display: block;
}


</style>


            <ul class="nav navbar-nav navbar-left ct-navbar--fadeInLeft" style="padding-bottom: 35px;">
                <li class="onepage active"><a href="index.php">Home</a></li>
                <li class="onepage"><a href="about-us.php">About</a></li>
                <li class="onepage"><a href="BoxProducts.php">Fresh Boxes</a></li>
                <li class="onepage"><a href="our-products.php">Products</a></li>
                <li class="onepage"><a href="donations.php">Donate</a></li>
                <li class="onepage"><a href="contact-us.php">Contact</a></li>

<?php


if (isset($_SESSION['login']) && $_SESSION['login']  ){

?>

                <div class="dropdown">
  <button class="dropbtn">Hello <?php if (isset($_SESSION['nom'])) echo $_SESSION['nom']; else echo $_SESSION['company_name'] ;?> </button>
  <div class="dropdown-content">
    <a href="logout.php" class="glyphicon glyphicon-off"> Disconnect</a>
	<a href="provider.php" class="glyphicon glyphicon-user"> Profile</a>
    <a href="panier.php" class ="glyphicon glyphicon-shopping-cart"> My basket</a>
  </div>
</div>

                <?php
                }
                else{

                ?>




                <li><a href="javascript:slideonlyone('newboxes3');" id="signin">Sign In</a></li>
                <li><a href="#exampleModal" data-toggle="modal" data-target = "#exampleModal" data-backdrop="false"> Sign Up</a></li>

<?php } ?>



            </ul>
        </div>
    </nav>
</header>
</section>



<div class="modal fade" id="exampleModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <i class="fa fa-times" style="font-size:24px;margin-left: 97%" data-dismiss="modal" aria-hidden="true"></i>
      </div>
      <div class="modal-body text-center">

        <a href="javascript:slideonlyone('newboxes1');"><button class="btnLog btn btn-default" id="client" >Client</button></a>
        <a href="javascript:slideonlyone('newboxes2');"><button class="btnLog btn btn-default" id="provider">Provider</button></a>
      </div>
    </div>
  </div>
</div>






<div class="newboxes1" id="newboxes1" style="padding: 5px; display: none;">
    <form action="#upload_client" method="post">
<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
    <a href="javascript:slideonlyone('newboxes1');" id="clientClose"><button type="button" class="close" aria-label="Close" style="background-color: transparent !important;margin-left: 80vw;border-radius: 100%;font-size: 40px">
  <span aria-hidden="true">&times;</span>
</button></a>
    <br><br>
    <div class="col-md-6">
        <table>
        
        <tr>
            <td>
                <label for="nom">Last Name</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="text" name="nom" required>
                  <label class="mdl-textfield__label" for="nom">Last name...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="prenom">First Name</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="text" name="prenom" required>
                  <label class="mdl-textfield__label" for="prenom">First name..</label>
                </div>
            </td>
        </tr>
        
        <tr>
            <td>
                <label for="email">E-mail</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="email" name="email" required>
                  <label class="mdl-textfield__label" for="email">e-mail...</label>
                </div>
            </td>
        </tr>
        </table>
    </div>
    <div class="col-md-6">
    <table>
        <tr>
            <td>
                <label for="password">Password</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="password" name="password" required>
                  <label class="mdl-textfield__label" for="password">Password...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="repeat_password">Repeat Password</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="password" name="repeat_password" required>
                  <label class="mdl-textfield__label" for="repeat_password">Repeat Password...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="adresse">Adresse</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="text" name="adresse" required>
                  <label class="mdl-textfield__label" for="adresse">adresse...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="carte_paiement">Paiement card</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="number" name="carte_paiement">
                  <label class="mdl-textfield__label" for="carte_paiement">Paiement card ...</label>
                </div>
            </td>
        </tr>
        <tr><td></td><td><button type="submit" name="submitClient" value="submitClient" class="btn btn-default btn-block">Submit</button></td></tr>
    </table>
    </div>

    
</form>

</div>



<div class="newboxes2" id="newboxes2" style="padding: 5px; display: none;">
    <form action="#upload_fournisseur" method="post" enctype="multipart/form-data">
<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
<a href="javascript:slideonlyone('newboxes2');" id="providerClose"><button type="button" class="close" aria-label="Close" style="background-color: transparent !important;margin-left: 80vw;border-radius: 100%;font-size: 40px">
  <span aria-hidden="true">&times;</span>
</button></a>
<div class="col-md-6">
    <table>
        <tr>
            <td>
                <label for="company_name">Company Name</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="text" name="company_name" required>
                  <label class="mdl-textfield__label" for="company_name">Company Name...</label>
                </div>
            </td>
        </tr>
        
        
        <tr>
            <td>
                <label for="email">E-mail</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="email" name="email" required>
                  <label class="mdl-textfield__label" for="email">e-mail...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="password">Password</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="password" name="password" required>
                  <label class="mdl-textfield__label" for="password">Password...</label>
                </div>
            </td>
        </tr>
        </table>
</div>
<div class="col-md-6">
    <table>
        <tr>
            <td>
                <label for="repeat_password">Repeat Password</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="password" name="repeat_password" required>
                  <label class="mdl-textfield__label" for="repeat_password">Repeat Password...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="adresse">Adresse</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="text" name="adresse" required>
                  <label class="mdl-textfield__label" for="adresse">adresse...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="description">Description</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="text" name="description" required>
                  <label class="mdl-textfield__label" for="description">Description...</label>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <label for="logo">Logo</label>
            </td>
            <td>
                <div class="mdl-textfield mdl-js-textfield">
                  <input class="mdl-textfield__input" type="file" name="logo" required>
                </div>
            </td>
        </tr>
        <tr><td></td><td><button type="submit" name="submitFournisseur" value="submitFournisseur" class="btn btn-default btn-block">Submit</button></td></tr>
        </table>
    </table>
</div>

    
</form>
</div>



<div class="newboxes3" id="newboxes3" style="padding: 5px; display: none;">
 
<center style="margin-top: 10vh">
  <form action="../forms/login.php" method="post">
<br><br><br><br><br><br><br>
  <h1>Sign In</h1>
  <br><br>
  <table>
    <tr>
      <td>
        <label for="email">E-mail</label>
      </td>
      <td>
        <div class="mdl-textfield mdl-js-textfield">
          <input class="mdl-textfield__input" type="email" name="email" required>
          <label class="mdl-textfield__label" for="email">E-mail...</label>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <label for="password">Password</label>
      </td>
      <td>
        <div class="mdl-textfield mdl-js-textfield">
          <input class="mdl-textfield__input" type="password" name="password" required>
          <label class="mdl-textfield__label" for="password">Password..</label>
        </div>
      </td>
    </tr>

    <tr><td></td><td><button type="submit" name="submitLogin" value="submitLogin" class="btn btn-default btn-block" >Log In</button></td></tr>
  </table>

  
</form>

</center>
</div>



<script type="text/javascript">
    $(document).ready(function() {
     $('#client').click(function() {
          $('#newboxes1').animate({
               height: 'toggle'
               }, 1000
          );
          $('#exampleModal').modal('hide');
          $('#newboxes2').css({
               display: 'none'
               }, 1000
          );
           $('#newboxes3').css({
               display: 'none'
               }, 1000
          );
     });
});

    $(document).ready(function() {
     $('#clientClose').click(function() {
          $('#newboxes1').css({
               display: 'none'
               }, 1000
          );

     });
});

        $(document).ready(function() {
     $('#provider').click(function() {
          $('#newboxes2').animate({
               height: 'toggle'
               }, 1000
          );
          $('#exampleModal').modal('hide');
          $('#newboxes1').css({
               display: 'none'
               }, 1000
          );
     });
});

    $(document).ready(function() {
     $('#providerClose').click(function() {
          $('#newboxes2').css({
               display: 'none'
               }, 1000
          );
           $('#newboxes3').css({
               display: 'none'
               }, 1000
          );

     });
});

        $(document).ready(function() {
     $('#signin').click(function() {
          $('#newboxes3').animate({
               height: 'toggle'
               }, 1000
          );
          $('#exampleModal').modal('hide');
          $('#newboxes1').css({
               display: 'none'
               }, 1000
          );
           $('#newboxes2').css({
               display: 'none'
               }, 1000
          );
     });
});



</script>
<div id="upload_fournisseur">

<?php

  if (isset($_POST['submitClient'])) {

    $first_name = $_POST['prenom'];
    $last_name = $_POST['nom'];
    $email = $_POST['email'];
    $password = $_POST['password'];
    $adresse = $_POST['adresse'];
    $carte_paiement = $_POST['carte_paiement'];


    
      $sql = "INSERT INTO client(nom,prenom,email,password,adresse,carte_paiement) VALUES ('$first_name','$last_name','$email','$password','$adresse','$carte_paiement')";

      $db->update($sql);
  }
?>
</div>
<div id="upload_fournisseur">
    

<?php
  if (isset($_POST['submitFournisseur'])) {

    $company_name = $_POST['company_name'];
    $email = $_POST['email'];
    $password = $_POST['password'];
    $adresse = $_POST['adresse'];
    $description = $_POST['description'];


    $tmp_name = $_FILES['logo']['tmp_name'];
    $filename = "../forms/fournisseurs/". $company_name . ".jpg";
    if(!is_dir('fournisseurs'))
        mkdir('fournisseurs');
    if (move_uploaded_file($tmp_name,$filename)) {  
      echo "Uploaded Complete ♥ ☺";
      $sql = "INSERT INTO fournisseur(company_name,email,password,adresse,description,logo) VALUES ('$company_name','$email','$password','$adresse','$description','$filename')";
     $db->update($sql);
     var_dump(move_uploaded_file($tmp_name,$filename));
    }
    else {
      
      
    }
  }
?>
</div>